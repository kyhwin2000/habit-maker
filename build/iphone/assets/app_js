var osname=Ti.Platform.osname,version=Ti.Platform.version,scrHeight=Ti.Platform.displayCaps.platformHeight,scrWidth=Ti.Platform.displayCaps.platformWidth,defaultFontSize="android"===Ti.Platform.name?16:14,db=Ti.Database.open("habitDB");db.execute("CREATE TABLE IF NOT EXISTS habit (id INTEGER PRIMARY KEY, name TEXT, days TEXT, status TEXT)"),db.execute("DELETE FROM habit");var chk01Dates=["2013-1-17","2013-1-19","2013-1-20"],Json01String=JSON.stringify(chk01Dates),chk02Dates=["2013-2-2","2013-2-4","2013-2-10"],Json02String=JSON.stringify(chk02Dates),chk03Dates=[],Json03String=JSON.stringify(chk03Dates),habit01Array=["매일 운동",Json01String,"20%"];db.execute("INSERT INTO habit (name, days, status) VALUES (?, ?, ?)",habit01Array);var habit02Array=["매일 코딩",Json02String,"30%"];db.execute("INSERT INTO habit (name, days, status) VALUES (?, ?, ?)",habit02Array),Ti.UI.setBackgroundColor("#000");var win1=Ti.UI.createWindow(),win2=Ti.UI.createWindow({title:"습관 목록",backgroundColor:"#fff"}),win3=Ti.UI.createWindow({url:"win3.js",title:"습관 달력",backgroundColor:"#fff"}),nav=Ti.UI.iPhone.createNavigationGroup({window:win2}),makeTable=function(){for(var e=db.execute("SELECT * FROM habit"),t=[],a=0;e.isValidRow();){var i=Ti.UI.createTableViewRow({className:"habits",selectedBackgroundColor:"white",height:60}),n=Ti.UI.createLabel({color:"#576996",font:{fontFamily:"Arial",fontSize:defaultFontSize+6,fontWeight:"bold"},text:e.fieldByName("name"),rowID:a,left:20,top:20,width:200,height:30});i.add(n);var o=Ti.UI.createLabel({color:"#999",font:{fontFamily:"Arial",fontSize:defaultFontSize,fontWeight:"normal"},text:e.fieldByName("status"),left:260,top:20,width:200,height:30});i.add(o),t.push(i),e.next(),a++}e.close();var r=Ti.UI.createTableView({backgroundColor:"white",top:50,data:t,editable:!0,moveable:!0});win2.add(r),r.addEventListener("click",function(e){Ti.App.Properties.setInt("selectedRow",e.source.rowID),nav.open(win3,{animated:!0})})};makeTable();var tf1=Ti.UI.createTextField({color:"#336699",height:35,top:10,left:10,width:300,hintText:"Add an item",keyboardType:Ti.UI.KEYBOARD_DEFAULT,returnKeyType:Ti.UI.RETURNKEY_DEFAULT,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});tf1.addEventListener("return",function(){db.execute("INSERT INTO habit (name,days,status) VALUES (?,?,?)",tf1.getValue(),Json03String,"0%"),tf1.blur(),makeTable()}),win2.add(tf1),win2.addEventListener("focus",makeTable),win1.add(nav),win1.open();